# NOTE: Generated By HttpRunner v3.1.6
# FROM: har\addDzmProduct.har


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCaseAdddzmproduct(HttpRunner):

    config = Config("testcase description").verify(False).base_url("${ENV(T_FXM_URL)")

    teststeps = [
        Step(
            RunRequest("新增电子码基础型号")
            .post(
                "/dzm/services/local/dzm/product/productSpec.japi"
            )
            .with_headers(
                **{
                    "content-type": "application/json",
                    "user-agent": "${ENV(USER_AGENT)}",
                }
            )
            .with_cookies(
                **{
                    "RSESSIONID": "${ENV(T_COOKIE)}",
                }
            )
            .with_json(
                {
                    "method": "add",
                    "params": {
                        "variables": {
                            "name1": "【免预约】重庆卓锦方阁SAP茶艺（169抢购）",
                            "name2": "",
                            "advanceDay": "0",
                            "costPrice": "75",
                            "isCalendar": "0",
                            "orderFlow": "3",
                            "inventory": "100",
                            "packageType": "0",
                            "packageQuantity": "",
                            "packageMoney": "",
                            "singerName": "王高飞",
                            "singer": "86525",
                            "nameCompany": "8",
                            "saleCompany": "2",
                            "department": "",
                            "settlementName": "测试电子码（供应商）",
                            "supplierSettlement": "1243",
                            "supplierName": "测试电子码（供应商）",
                            "supplier": "1243",
                            "serviceName": "旅划算（CS）",
                            "service": "1",
                            "type": "1",
                            "settleType": "5",
                            "cycleSettleDay": "7",
                            "costCalculateType": "0",
                            "costApportionedCount": "",
                            "eachCost": "",
                            "payTime": "0",
                            "contractType": "1",
                            "note": "",
                            "settleDay": "1",
                            "createrId": "12460",
                            "createrName": "蔡子扬",
                            "beginTime": "2022-03-10",
                            "endTime": "2022-08-30",
                            "name": "【免预约】重庆卓锦方阁SAP茶艺（169抢购）",
                            "saleCompanyName": "广东分公司",
                            "nameCompanyName": "广州市恒生国际旅行社有限公司",
                            "departmentName": "",
                            "productLevel": "0",
                            "prIds": "false"
                        }
                    }
                }
            )
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.result", 1)
        ),
        Step(
            RunRequest("查询新增的基础型号，获取id")
            .post(
                "/dzm/services/local/dzm/product/productSpec.japi"
            )
            .with_headers(
                **{
                    "content-type": "application/json",
                    "user-agent": "${ENV(USER_AGENT)}",
                }
            )
            .with_cookies(
                **{
                    "RSESSIONID": "${ENV(T_COOKIE)}",
                }
            )
            .with_json(
                {
                    "order": "asc",
                    "method": "query",
                    "params": {
                        "pagenumber": 1,
                        "pagesize": 3,
                        "variables": {
                            "id": "",
                        },
                    },
                }
            ).extract().with_jmespath("body.result.rows[0].id", "product_spec_id")
            .validate()
            .assert_equal("status_code", 200)
        ),
        Step(
            RunRequest("新增电子码产品")
            .post("/dzm/services/local/dzm/product/product.japi")
            .with_headers(
                **{
                    "content-type": "application/json",
                    "user-agent": "${ENV(USER_AGENT)}",
                }
            )
            .with_cookies(
                **{
                    "RSESSIONID": "${ENV(T_COOKIE)}",
                }
            )
            .with_json(
                {
                    "method": "add",
                    "params": {
                        "variables": {
                            "id": "",
                            "property": "0",
                            "name": "【免预约】重庆卓锦方阁SAP茶艺（169抢购）",
                            "retailPrice": "498",
                            "advicePrice": "169",
                            "bookingNum": "3",
                            "isYcard": "0",
                            "isChainStore": 0,
                            "addr": "",
                            "bookSuccessHint": "",
                            "refuseSms": "",
                            "codeSms": "【卓锦方阁SAP茶艺】尊敬的$userName$，您$codeNum$份核销二维码链接为$codeQrLink$。即日起可凭码直接到店核销使用，免预约。咨询电话028-63638080。使用日期即日-2022年5月31日，过期作废。如需客服请在公众号留言（回复时间9-22点）",
                            "industryCodeSms": "【卓锦方阁SAP茶艺】尊敬的$userName$，您$codeNum$份核销二维码链接为$codeQrLink$。即日起可凭码直接到店核销使用，免预约。咨询电话028-63638080。使用日期即日-2022年5月31日，过期作废",
                            "validSms": "0",
                            "state": "1",
                            "groupId": "",
                            "returnLimit": "10",
                            "notBookRemindSms": "【卓锦方阁SAP茶艺】尊敬的$userName$，您的套票还没使用，2022年5月31日到期，不使用将自动作废，请尽快使用",
                            "notBookRemindSmsAutoSend": 0,
                            "onTime": "2022-03-10 00:00:00",
                            "offTime": "2022-05-31 00:00:00",
                            "serviceOnTime": "2022-03-10 00:00:00",
                            "serviceOffTime": "2022-06-30 00:00:00",
                            "bookingBDate": 20220310,
                            "bookingEDate": 20220531,
                            "bookingBTime": 900,
                            "bookingETime": 1800,
                            "bookingCloseTime": "",
                            "sendCodeDate": "null",
                            "useOutCode": "0",
                            "linkBookingUrl": "",
                            "guideUrl": "",
                            "codeNum": "1",
                            "productExplan": "%253Cp%2520style=%2522margin-top:0px;margin-bottom:0px;white-space:pre-wrap;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;letter-spacing:0.544px;background-color:#FFFFFF;color:#3E3E3E;font-size:14px;line-height:1.75em;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#F41D1F;font-size:20px;font-weight:700;letter-spacing:0.544px;text-align:justify;widows:1;font-family:-apple-system-font,%2520BlinkMacSystemFont,%2520&quot;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E8%25B6%25B3%25E9%2581%2593%25E5%25A5%2597%25E9%25A4%2590%25EF%25BC%259A169%25E5%2585%2583/%25E5%25A5%2597%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;text-decoration-line:line-through;letter-spacing:0.544px;color:#595959;font-size:15px;text-align:center;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25EF%25BC%2588%25E9%2597%25A8%25E5%25B8%2582%25E4%25BB%25B7%25EF%25BC%259A498%25E5%2585%2583%25EF%25BC%2589%253C/span%253E%253C/span%253E%250A%253C/p%253E%250A%253Cp%2520style=%2522margin-top:0px;margin-bottom:0px;white-space:pre-wrap;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;letter-spacing:0.544px;background-color:#FFFFFF;color:#3E3E3E;font-size:14px;line-height:1.75em;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cbr%2520/%253E%250A%253C/p%253E%250A%253Cp%2520style=%2522margin-top:0px;margin-bottom:0px;white-space:pre-wrap;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;letter-spacing:0.544px;background-color:#FFFFFF;color:#3E3E3E;font-size:14px;line-height:1.75em;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E6%258A%25A2%25E8%25B4%25AD%25E6%2597%25A5%25E6%259C%259F%25EF%25BC%259A%253C/span%253E%253C/strong%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%258D%25B3%25E6%2597%25A5-2022%25E5%25B9%25B45%25E6%259C%258831%25E6%2597%25A5%253C/span%253E%250A%253C/p%253E%250A%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E4%25BD%25BF%25E7%2594%25A8%25E6%2597%25A5%25E6%259C%259F%25EF%25BC%259A%253C/span%253E%253C/strong%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%258D%25B3%25E6%2597%25A5-2022%25E5%25B9%25B45%25E6%259C%258831%25E6%2597%25A5%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E7%25A1%25AE%25E8%25AE%25A4%25E7%259F%25AD%25E4%25BF%25A1%25EF%25BC%259A%253C/span%253E%253C/strong%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E8%25B4%25AD%25E4%25B9%25B0%25E6%2588%2590%25E5%258A%259F%25E5%2590%258E%25E5%258D%25B3%25E5%258F%25AF%25E6%2594%25B6%25E5%2588%25B0%25E5%2590%25AB%25E7%2594%25B5%25E5%25AD%2590%25E7%25A0%2581%25E7%259A%2584%25E6%2589%258B%25E6%259C%25BA%25E7%259F%25AD%25E4%25BF%25A1%25EF%25BC%25881%25E4%25B8%25AA%25E7%2594%25B5%25E5%25AD%2590%25E7%25A0%2581%25EF%25BC%2589%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E4%25BD%25BF%25E7%2594%25A8%25E6%2596%25B9%25E5%25BC%258F%25EF%25BC%259A%253C/span%253E%253C/strong%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;text-align:center;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%258D%25B3%25E6%2597%25A5%25E8%25B5%25B7%25E5%258F%25AF%25E5%2587%25AD%25E7%25A0%2581%25E7%259B%25B4%25E6%258E%25A5%25E5%2588%25B0%25E5%25BA%2597%25E6%25A0%25B8%25E9%2594%2580%25E4%25BD%25BF%25E7%2594%25A8%25EF%25BC%258C%253C/span%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;text-align:center;font-size:15px;color:#FF0000;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%2585%258D%25E9%25A2%2584%25E7%25BA%25A6%253C/strong%253E%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;letter-spacing:0.544px;font-family:sans-serif;font-size:16px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cbr%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%2520/%253E%250A%253C/section%253E%250A%253Cp%2520style=%2522white-space:normal;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;letter-spacing:0.544px;background-color:#FFFFFF;color:#3E3E3E;font-size:14px;text-align:justify;widows:1;line-height:1.75em;font-family:-apple-system-font,%2520BlinkMacSystemFont,%2520&quot;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#FF2941;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%25A5%2597%25E9%25A4%2590%25E5%258C%2585%25E5%2590%25AB%25EF%25BC%259A%253C/strong%253E%253C/span%253E%250A%253C/p%253E%250A%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E6%25B3%25A1%25E8%2584%259A+%25E5%25A4%25B4%25E9%2583%25A8%25E6%258C%2589%25E6%2591%25A915%25E5%2588%2586%25E9%2592%259F%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E8%25B6%25B3%25E5%25BA%2595%25E5%2585%25A8%25E6%2581%25AF35%25E5%2588%2586%25E9%2592%259F%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%2590%258E%25E8%2585%25BF%25E9%2583%25A8%25E6%258C%2589%25E6%2591%25A910%25E5%2588%2586%25E9%2592%259F%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E8%2583%258C%25E9%2583%25A8%25E7%25B2%25BE%25E6%25B2%25B920%25E5%2588%2586%25E9%2592%259F%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E4%25BF%25AE%25E8%2584%259A20%25E5%2588%2586%25E9%2592%259F&nbsp;%2520&nbsp;%25E4%25BB%25B7%25E5%2580%25BC49%25E5%2585%2583%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E6%25B5%25B7%25E9%25B2%259C%25E7%25BE%258E%25E9%25A3%259F%25E8%2587%25AA%25E5%258A%25A9&nbsp;%2520&nbsp;%25E4%25BB%25B7%25E5%2580%25BC99%25E5%2585%2583%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E5%2593%2588%25E6%25A0%25B9%25E8%25BE%25BE%25E6%2596%25AF%25E5%2586%25B0%25E6%25BF%2580%25E5%2587%258C&nbsp;%2520%25E4%25BB%25B7%25E5%2580%25BC39.9%25E5%2585%2583%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-size:15px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E*&nbsp;22%25E7%2582%25B9%25E4%25BB%25A5%25E5%2590%258E%25E6%25B6%2588%25E8%25B4%25B9%25E6%25AD%25A4%25E9%25A1%25B9%25E7%259B%25AE%25E5%2585%258D%25E7%2595%2599%25E5%25AE%25BF%25E8%25B4%25B9+%25E9%25AB%2598%25E7%25BA%25A7%25E6%25B4%2597%25E6%25BC%25B1%25E7%2594%25A8%25E5%2593%2581%253C/span%253E%253C/section%253E%250A%253Cp%2520style=%2522margin-right:8px;margin-bottom:10px;margin-left:8px;white-space:normal;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;letter-spacing:0.544px;background-color:#FFFFFF;color:#3E3E3E;font-size:14px;text-align:justify;widows:1;line-height:1.75em;font-family:-apple-system-font,%2520BlinkMacSystemFont,%2520&quot;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cbr%2520/%253E%250A%253C/p%253E%250A%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;letter-spacing:0.544px;background-color:#FFFFFF;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;widows:1;color:#3E3E3E;font-size:16px;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E&nbsp;%25E5%2595%2586%25E5%25AE%25B6%25E5%259C%25B0%25E5%259D%2580%25EF%25BC%259A%25E9%2587%258D%25E5%25BA%2586%25E5%25B8%2582%25E6%25B8%259D%25E5%258C%2597%25E5%258C%25BA%25E5%258C%2596%25E9%25BE%2599%25E8%25A1%2597%25E9%2581%2593%25E7%2591%259E%25E5%25A4%25A9%25E8%25B7%25AF6%25E5%258F%25B75%25E5%25B1%2582%25EF%25BC%2588%25E5%2598%2589%25E9%2599%25B5%25E4%25B8%25AD%25E5%25BF%2583B%25E9%25A6%25865%25E6%25A5%25BC%25EF%25BC%2589%253C/strong%253E%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;letter-spacing:0.544px;background-color:#FFFFFF;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;widows:1;color:#3E3E3E;font-size:16px;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;letter-spacing:0.544px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%2520%25E5%2592%25A8%25E8%25AF%25A2%253C/span%253E%25E7%2594%25B5%25E8%25AF%259D%25EF%25BC%259A028-63638080%253C/span%253E%253C/strong%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;letter-spacing:0.544px;background-color:#FFFFFF;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;widows:1;color:#3E3E3E;font-size:16px;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;letter-spacing:0.544px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586&nbsp;%253C/span%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E8%2590%25A5%25E4%25B8%259A%25E6%2597%25B6%25E9%2597%25B4%25EF%25BC%259A24%25E5%25B0%258F%25E6%2597%25B6%25E8%2590%25A5%25E4%25B8%259A%253C/strong%253E%253C/span%253E%253C/section%253E%250A%253Cp%2520style=%2522margin-top:0px;margin-bottom:0px;white-space:normal;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-family:-apple-system-font,%2520BlinkMacSystemFont,%2520&quot;font-size:15px;widows:1;letter-spacing:1px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#FF2941;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cbr%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%2520/%253E%250A%253C/span%253E%253C/strong%253E%253C/span%253E%250A%253C/p%253E%250A%253Cp%2520style=%2522margin-top:0px;margin-bottom:0px;white-space:normal;padding:0px;outline:0px;max-width:100%2525;clear:both;min-height:1em;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;%2522%253E%250A%2509%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-family:-apple-system-font,%2520BlinkMacSystemFont,%2520&quot;font-size:15px;widows:1;letter-spacing:1px;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#FF2941;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E3%2580%2590%25E8%25B4%25AD%25E4%25B9%25B0%25E6%25AD%25A4%25E5%25A5%2597%25E9%25A4%2590%25E9%25A1%25BB%25E7%259F%25A5%25E3%2580%2591%253C/span%253E%253C/strong%253E%253C/span%253E%250A%253C/p%253E%250A%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%2520%25E5%2591%25A8%25E6%259C%25AB%25E5%258F%258A%25E8%258A%2582%25E5%2581%2587%25E6%2597%25A5%25E9%2580%259A%25E7%2594%25A8%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%253C/span%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E&nbsp;%253C/span%253E1%25E5%25A4%25A71%25E5%25B0%258F%25E8%2587%25AA%25E5%258A%25A9%25E9%25A4%2590%25EF%25BC%259A1%25E5%25B0%258F%25E6%258C%25871%25E5%2590%258D1.2%25E7%25B1%25B3%25E4%25BB%25A5%25E4%25B8%258B%25E5%25B0%258F%25E6%259C%258B%25E5%258F%258B%25EF%25BC%259B1.2%25E7%25B1%25B3%25E5%2588%25B01.5%25E7%25B1%25B3%25E5%258D%258A%25E4%25BB%25B7%25EF%25BC%258C1.5%25E7%25B1%25B3%25E4%25BB%25A5%25E4%25B8%258A%25E5%2585%25A8%25E4%25BB%25B7%25EF%25BC%258C%25E4%25BA%258E%25E5%2589%258D%25E5%258F%25B0%25E7%258E%25B0%25E5%259C%25BA%25E5%258A%25A0%25E6%2594%25B6%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%2520%25E5%25A6%2582%25E9%259C%2580%25E5%25A5%2597%25E9%25A4%2590%25E5%25A4%2596%25E5%25A2%259E%25E5%2580%25BC%25E6%259C%258D%25E5%258A%25A1%25EF%25BC%258C%25E8%25B4%25B9%25E7%2594%25A8%25E8%2587%25AA%25E7%2590%2586%25EF%25BC%258C%25E8%25AF%25A6%25E6%2583%2585%25E8%25AF%25B7%25E5%2592%25A8%25E8%25AF%25A2%25E7%259B%25B8%25E5%2585%25B3%25E5%25B7%25A5%25E4%25BD%259C%25E4%25BA%25BA%25E5%2591%2598%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%2520%25E4%25B8%258D%25E5%2586%258D%25E4%25B8%258E%25E5%2585%25B6%25E5%25AE%2583%25E4%25BC%2598%25E6%2583%25A0%25E5%2590%258C%25E4%25BA%25AB%253C/span%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;font-size:15px;color:#595959;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586%2520%25E4%25BB%25A5%25E4%25B8%258A%25E5%25A5%2597%25E9%25A4%2590%25E7%259B%25B8%25E5%2585%25B3%25E5%2586%2585%25E5%25AE%25B9%25EF%25BC%258C%25E5%25A6%2582%25E6%259C%2589%25E5%258F%2598%25E5%258A%25A8%25E8%25AF%25B7%25E4%25BB%25A5%25E5%25AE%259E%25E9%2599%2585%25E6%2583%2585%25E5%2586%25B5%25E4%25B8%25BA%25E5%2587%2586%253C/span%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:none;max-width:100%2525;letter-spacing:0.544px;-webkit-tap-highlight-color:transparent;color:#595959;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;font-size:15px;widows:1;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253C/strong%253E%253C/section%253E%253Csection%2520style=%2522white-space:normal;margin:5px%25200px;padding:0px;outline:0px;max-width:100%2525;color:#333333;font-family:-apple-system,%2520BlinkMacSystemFont,%2520&quot;font-size:17px;letter-spacing:0.544px;background-color:#FFFFFF;line-height:1.75em;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cstrong%2520style=%2522margin:0px;padding:0px;outline:none;max-width:100%2525;color:#595959;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;font-size:15px;widows:1;-webkit-tap-highlight-color:transparent;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:none;max-width:100%2525;-webkit-tap-highlight-color:transparent;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25E2%2597%2586&nbsp;%253C/span%253E%25E5%2594%25AE%25E5%2590%258E%25E8%25A7%2584%25E5%2588%2599%253C/strong%253E%253Cspan%2520style=%2522margin:0px;padding:0px;outline:0px;max-width:100%2525;color:#595959;font-family:%25E5%25BE%25AE%25E8%25BD%25AF%25E9%259B%2585%25E9%25BB%2591;font-size:15px;widows:1;box-sizing:border-box%2520!important;overflow-wrap:break-word%2520!important;%2522%253E%25EF%25BC%259A%25E6%259C%25AC%25E4%25BA%25A7%25E5%2593%2581%25E4%25B8%25BA%25E9%2599%2590%25E6%2597%25B6%25E9%2599%2590%25E9%2587%258F%25E7%2589%25B9%25E6%2583%25A0%25E4%25BA%25A7%25E5%2593%2581%25EF%25BC%258C%25E8%25AF%25B7%25E5%259C%25A8%25E6%259C%2589%25E6%2595%2588%25E6%259C%259F%25E5%2586%2585%25E4%25BD%25BF%25E7%2594%25A8%25EF%25BC%258C%25E9%2580%25BE%25E6%259C%259F%25E6%259C%25AA%25E4%25BD%25BF%25E7%2594%25A8%25E7%2594%25B3%25E8%25AF%25B7%25E9%2580%2580%25E6%25AC%25BE%25E9%259C%2580%25E6%2594%25AF%25E4%25BB%259830%2525%25E6%2589%258B%25E7%25BB%25AD%25E8%25B4%25B9%25EF%25BC%258C%25E6%259C%2589%25E6%2595%2588%25E6%259C%259F%25E5%2586%2585%25E6%259C%25AA%25E9%25A2%2584%25E7%25BA%25A6%25E6%259C%25AA%25E4%25BD%25BF%25E7%2594%25A8%25E7%2594%25B3%25E8%25AF%25B7%25E9%2580%2580%25E6%25AC%25BE%25E9%259C%2580%25E6%2594%25AF%25E4%25BB%259830%2525%25E6%2589%258B%25E7%25BB%25AD%25E8%25B4%25B9%25EF%25BC%258C%25E6%2595%25AC%25E8%25AF%25B7%25E8%25B0%2585%25E8%25A7%25A3%25EF%25BC%2581%253C/span%253E%253C/section%253E",
                            "addedExplan": "",
                            "tips": "",
                            "smsTemplate": "",
                            "changeSms": "",
                            "cancelSms": "",
                            "useRemindSms": "",
                            "note": "",
                            "createrId": "12460",
                            "createrName": "蔡子扬"
                        }
                    }
                }
            ).extract().with_jmespath("body.result.prID", "dzm_product_id")
            .validate()
            .assert_equal("status_code", 200)
        ),
        Step(
            RunRequest("新增主项")
            .post(
                "/dzm/services/local/dzm/product/productSpecBox.japi"
            )
            .with_headers(
                **{
                    "content-type": "application/json",
                    "user-agent": "${ENV(USER_AGENT)}",
                }
            )
            .with_cookies(
                **{
                    "RSESSIONID": "${ENV(T_COOKIE)}",
                }
            )
            .with_json(
                {
                    "method": "add",
                    "params": {
                        "variables": {
                            "bx_name": "足道套餐",
                            "eachQuantity": 1,
                            "bx_booking_limit": "",
                            "bx_dzm_num": "1",
                            "bx_add_type": "0",
                            "bx_state": "0",
                            "bx_advance_day": "0",
                            "bx_type_note": "",
                            "bx_prompt": "",
                            "list_params": "[{\"BI_NAME\":\"姓名\",\"BI_NUM\":\"1\",\"BI_CONTROL\":\"1\",\"BI_MUST\":\"1\",\"BI_FOLLOW_CHANGE\":\"0\",\"BI_KEY_VALUE\":\"{}\"},{\"BI_NAME\":\"手机\",\"BI_NUM\":\"1\",\"BI_CONTROL\":\"2\",\"BI_MUST\":\"1\",\"BI_FOLLOW_CHANGE\":\"0\",\"BI_KEY_VALUE\":\"{}\"}]",
                            "createrId": "12460",
                            "createrName": "蔡子扬",
                            "bx_product_id": "103949",
                            "bx_main": 1,
                            "bx_type": 0,
                            "specs": [
                                {
                                    "specId": "155521",
                                    "br_num": "1",
                                    "br_ratio": "100",
                                    "br_addmoney": "0"
                                }
                            ]
                        }
                    }
                }
            )
            .validate()
            .assert_equal("status_code", 200)
        ),
        Step(
            RunRequest("设置电子码产品配额")
            .post(
                "/dzm/services/local/dzm/product/productAlloc.japi"
            )
            .with_headers(
                **{
                    "content-type": "application/json",
                    "user-agent": "${ENV(USER_AGENT)}",
                }
            )
            .with_cookies(
                **{
                    "RSESSIONID": "${ENV(T_COOKIE)}",
                }
            )
            .with_data(
                {
                    "method": "edit",
                    "params": {
                        "variables": {
                            "cnName": "分销系统",
                            "allocPrice": "75",
                            "advisePrice": "169",
                            "num": "1000",
                            "id": 7949,
                            "productId1": "103949",
                            "channelId1": "2",
                            "lastmodifyId": "12460",
                            "lastmodifyName": "蔡子扬",
                            "productId": "103949"
                        }
                    }
                }
            )
            .validate()
            .assert_equal("status_code", 200)
        ),
    ]


if __name__ == "__main__":
    TestCaseAdddzmproduct().test_start()
